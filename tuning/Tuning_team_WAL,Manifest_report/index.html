<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>(Rank 3) Team WAL/Manifest - LevelDB WIKI</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">LevelDB WIKI</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Code Analysis <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../analysis/memtable/">Memtable</a>
</li>

                        
                            
<li >
    <a href="../../analysis/wal/">WAL</a>
</li>

                        
                            
<li >
    <a href="../../analysis/manifest/">Manifest</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Compaction</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../analysis/compaction/compaction/">Compaction Types</a>
</li>

        
            
<li >
    <a href="../../analysis/compaction/Major-Compaction/">Major Compaction</a>
</li>

        
            
<li >
    <a href="../../analysis/compaction/Minor-Compaction/">Minor Compaction</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">SSTable</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../analysis/sstable/sstable/">SSTable Structure</a>
</li>

        
            
<li >
    <a href="../../analysis/sstable/sstable-write/">SSTable Write</a>
</li>

        
            
<li >
    <a href="../../analysis/sstable/sstable-read/">SSTable Read</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Bloom Filter</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../analysis/bloomfilter/bloomfilter/">Bloom Filter Structure</a>
</li>

        
            
<li >
    <a href="../../analysis/bloomfilter/bloomfilter-write/">Bloom Filter Write</a>
</li>

        
            
<li >
    <a href="../../analysis/bloomfilter/bloomfilter-read/">Bloom Filter Read</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../analysis/cache/">Cache</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Benchmark Experiment <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">WAL</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../benchmarks/wal_1/">Disable_wal</a>
</li>

        
            
<li >
    <a href="../../benchmarks/wal_2/">Max_total_wal_size</a>
</li>

        
            
<li >
    <a href="../../benchmarks/wal_3/">Manual_wal_flush</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../benchmarks/compaction/">Compaction</a>
</li>

                        
                            
<li >
    <a href="../../benchmarks/sstable/">SSTable</a>
</li>

                        
                            
<li >
    <a href="../../benchmarks/bloomfilter/">Bloom Filter</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">YCSB Tuning Contest <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../">Tuning Contest Overview</a>
</li>

                        
                            
<li >
    <a href="../Tuning_team_SSTable_report/">(Rank 1) Team SSTable</a>
</li>

                        
                            
<li >
    <a href="../Tuning_team_bloomfilter_report/">(Rank 1) Team Bloom Filter</a>
</li>

                        
                            
<li class="active">
    <a href="./">(Rank 3) Team WAL/Manifest</a>
</li>

                        
                            
<li >
    <a href="../Tuning_team_memtable_report/">(Rank 4) Team Memtable</a>
</li>

                        
                            
<li >
    <a href="../Tuning_team_cache_report/">(Rank 5) Team Cache</a>
</li>

                        
                            
<li >
    <a href="../Tuning_team_Compaction_report/">(Rank 6) Team Compaction</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Assignments <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../practice/practice/">Assignments</a>
</li>

                        
                            
<li >
    <a href="../../practice/answer/">Answers</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../Tuning_team_bloomfilter_report/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../Tuning_team_memtable_report/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#team-walmanifest-tuning-report">[Team WAL/Manifest] Tuning Report</a></li>
            <li class="second-level"><a href="#hypothesis">Hypothesis</a></li>
                
                <li class="third-level"><a href="#write_buffer_size">write_buffer_size</a></li>
                <li class="third-level"><a href="#max_file_size">max_file_size</a></li>
                <li class="third-level"><a href="#block_size">block_size</a></li>
                <li class="third-level"><a href="#block_restart_interval">block_restart_interval</a></li>
                <li class="third-level"><a href="#block_cache_size">block_cache_size</a></li>
                <li class="third-level"><a href="#compression">compression</a></li>
                <li class="third-level"><a href="#filter_policy">filter_policy</a></li>
            <li class="second-level"><a href="#experiments">Experiments</a></li>
                
                <li class="third-level"><a href="#write_buffer_size_1">write_buffer_size</a></li>
                <li class="third-level"><a href="#max_file_size_1">max_file_size</a></li>
                <li class="third-level"><a href="#block_size_1">block_size</a></li>
                <li class="third-level"><a href="#block_restart_interval_1">block_restart_interval</a></li>
                <li class="third-level"><a href="#block_cache_size_1">block_cache_size</a></li>
                <li class="third-level"><a href="#compression_1">compression</a></li>
                <li class="third-level"><a href="#filter_policy_1">filter_policy</a></li>
            <li class="second-level"><a href="#results">Results</a></li>
                
                <li class="third-level"><a href="#write_buffer_size_2">write_buffer_size</a></li>
                <li class="third-level"><a href="#max_file_size_2">max_file_size</a></li>
                <li class="third-level"><a href="#block_size_2">block_size</a></li>
                <li class="third-level"><a href="#block_restart_interval_2">block_restart_interval</a></li>
                <li class="third-level"><a href="#block_cache_size_2">block_cache_size</a></li>
                <li class="third-level"><a href="#compression_2">compression</a></li>
                <li class="third-level"><a href="#filter_policy_2">filter_policy</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="team-walmanifest-tuning-report">[Team WAL/Manifest] Tuning Report</h2>
<h3 id="hypothesis">Hypothesis</h3>
<hr />
<h4 id="write_buffer_size">write_buffer_size</h4>
<pre><code>Increasing the write_buffer_size improves performance during bulk loads.
Since max_memory_size (= write_buffer_size + block_cache_size) &lt;= 1GB,
the performance of Load is expected to be maximized at 1GB.
WorkloadA: Read(50) + Modify(50)
WorkloadB: Read(95) + Modify(5)
WorkloadD: Read(95) + Modify(5)
Therefore, as all workloads involve modifications, increasing the write_buffer_size
is expected to improve performance in LoadA, RunA, RunB, and RunD.
</code></pre>
<h4 id="max_file_size">max_file_size</h4>
<pre><code>Increasing the maximum file size may lengthen compaction time, potentially slowing latency.
It is important to find a suitable value for the file system.
If the file system is efficient with relatively large files, the file size can be increased.
</code></pre>
<h4 id="block_size">block_size</h4>
<pre><code>This option sets the approximate size of packed data per block.
Since the block size here refers to uncompressed data, it was anticipated that smaller sizes
would be advantageous for performance due to faster compression.
</code></pre>
<h4 id="block_restart_interval">block_restart_interval</h4>
<pre><code>The exact function of this option is not well understood, but
// Most clients should leave this parameter alone.
As recommended by leveldb, most clients do not change this parameter, so experiments were conducted accordingly.
</code></pre>
<h4 id="block_cache_size">block_cache_size</h4>
<pre><code>Generally, a larger cache size is thought to increase the hit rate.
However, due to the cost of cache and other factors, the performance may not scale linearly with size.
</code></pre>
<h4 id="compression">compression</h4>
<pre><code>The compression options are kNoCompression and kSnappyCompression.
// Note that these speeds are significantly faster than most
// persistent storage speeds, and therefore it is typically never
// worth switching to kNoCompression. Even if the input data is
// incompressible, the kSnappyCompression implementation will
// efficiently detect that and will switch to uncompressed mode.
According to the description of leveldb's compression options, there is no need to switch to kNoCompression,
and performance is expected to be better with kSnappyCompression.
</code></pre>
<h4 id="filter_policy">filter_policy</h4>
<pre><code>The default is set to NewBloomFilterPolicy, and based on the bloomfilter team's benchmark presentation,
it was reported to be most efficient at 10 bits, so experiments were conducted without changing this setting.
</code></pre>
<h3 id="experiments">Experiments</h3>
<hr />
<h4 id="write_buffer_size_1">write_buffer_size</h4>
<pre><code>Experiments were conducted on three different servers with 64, 128, 256, and 512MB.
It was found that there was no significant change beyond 64MB.
</code></pre>
<h4 id="max_file_size_1">max_file_size</h4>
<pre><code>Experiments were conducted by doubling the default max_file_size value of 2MB on three different server environments,
testing from 64MB to 1GB.
</code></pre>
<h4 id="block_size_1">block_size</h4>
<pre><code>Experiments were conducted by setting multiple values, doubling or halving from the default value of 4kB.
</code></pre>
<h4 id="block_restart_interval_1">block_restart_interval</h4>
<pre><code>Experiments were conducted with the default value of 16.
</code></pre>
<h4 id="block_cache_size_1">block_cache_size</h4>
<pre><code>The goal was to find the value at which performance no longer improved by increasing the size as much as possible.
</code></pre>
<h4 id="compression_1">compression</h4>
<pre><code>Experiments were conducted with both kNoCompression and kSnappyCompression, but there was no significant difference,
and performance did not improve with kNoCompression.
</code></pre>
<h4 id="filter_policy_1">filter_policy</h4>
<pre><code>Experiments were conducted with 10 bits while changing other options.
</code></pre>
<h3 id="results">Results</h3>
<hr />
<h4 id="write_buffer_size_2">write_buffer_size</h4>
<pre><code>It seems that beyond a certain value, it is fixed to a predetermined value.
Although it needs to be confirmed whether different servers affect the results, the average value was taken as the result
since the same results were not obtained on all three servers.
</code></pre>
<h4 id="max_file_size_2">max_file_size</h4>
<pre><code>There was no significant difference beyond 64MB, and since larger file sizes can generally be detrimental to performance,
64MB was chosen as the result among similar values.
</code></pre>
<h4 id="block_size_2">block_size</h4>
<pre><code>In our experiments, consistent and good results were observed at 8kB, so 8kB was chosen as the result.
</code></pre>
<h4 id="block_restart_interval_2">block_restart_interval</h4>
<pre><code>16
</code></pre>
<h4 id="block_cache_size_2">block_cache_size</h4>
<pre><code>Performance did not improve beyond 128MB, and repeated experiments confirmed high performance, so 128MB was chosen as the result.
</code></pre>
<h4 id="compression_2">compression</h4>
<pre><code>kSnappyCompression
</code></pre>
<h4 id="filter_policy_2">filter_policy</h4>
<pre><code>10 bits
</code></pre></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
